<!DOCTYPE html>
<html>
  <head>
    <title>Login dengan reCAPTCHA v2</title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  </head>
  <body>
    <h2>Login Form</h2>
    <form id="loginForm">
      <input type="email" id="email" placeholder="Email" required><br>
      <input type="password" id="password" placeholder="Password" required><br>

      <!-- reCAPTCHA v2 -->
      <div class="g-recaptcha" data-sitekey="6LeLlYArAAAAAOpJ7LHBYPS7xU1RLfQHuDd8jynh"></div><br>

      <button type="submit">Login</button>
    </form>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
      import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-functions.js";

      const firebaseConfig = {
       apiKey: "AIzaSyDeiLybtGc6evATj5O7M1FiJd1GPYd-rYc",
    authDomain: "tamplatedoc.firebaseapp.com",
     projectId: "tamplatedoc",
      };

      const app = initializeApp(firebaseConfig);
      const functions = getFunctions(app);

      const loginForm = document.getElementById("loginForm");
      loginForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const recaptchaToken = document.querySelector("[name='g-recaptcha-response']").value;

        if (!recaptchaToken) {
          alert("Tolong selesaikan reCAPTCHA terlebih dahulu.");
          return;
        }

        const verifyRecaptcha = httpsCallable(functions, 'verifyRecaptchaV2');
        try {
          const result = await verifyRecaptcha({ token: recaptchaToken });
          if (result.data.success) {
            alert("reCAPTCHA valid. Lanjutkan login...");
            // Lanjut login Firebase Auth di sini jika ingin
          } else {
            alert("Verifikasi reCAPTCHA gagal.");
          }
        } catch (err) {
          console.error("Error:", err);
          alert("Terjadi kesalahan saat verifikasi.");
        }
      });
    </script>
  </body>
</html>

  
